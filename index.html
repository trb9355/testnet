<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="UTF-8">

    <link rel="apple-touch-icon" type="image/png"
        href="https://cpwebassets.codepen.io/assets/favicon/apple-touch-icon-5ae1a0698dcc2402e9712f7d01ed509a57814f994c660df9f7a952f3060705ee.png">
    <meta name="apple-mobile-web-app-title" content="CodePen">

    <link rel="shortcut icon" type="image/x-icon"
        href="https://cpwebassets.codepen.io/assets/favicon/favicon-aec34940fbc1a6e787974dcd360f2c6b63348d4b1f4e06c77743096d55480f33.ico">

    <link rel="mask-icon" type="image/x-icon"
        href="https://cpwebassets.codepen.io/assets/favicon/logo-pin-8f3771b1072e3c38bd662872f6b673a722f4b3ca2421637d5596661b4e2132cc.svg"
        color="#111">


    <title>CodePen - Bootstrap/HTML5 form validation</title>


    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">

    <style>
        .spin-icon {
            -webkit-animation: spin 2.5s linear infinite;
            animation: spin 2.5s linear infinite;
        }

        @-webkit-keyframes spin {
            from {
                transform: rotate(0deg);
            }

            to {
                transform: rotate(360deg);
            }
        }

        @keyframes spin {
            from {
                transform: rotate(0deg);
            }

            to {
                transform: rotate(360deg);
            }
        }


        .form-group-relative {
            position: relative;
            width: 100%;
            height: 100%;
        }

        .form-group-relative .btn-copy {
            position: absolute;
            top: 50%;
            right: 30px;
            padding: 5px 10px;
            font-size: 12px;
            line-height: 10px;
            transform: translateY(-50%);
            border: 0px;
        }

        .form-group-relative .btn-copy:focus {
            outline: 0px;
            border: 0px;
            box-shadow: 0px;
        }
    </style>



</head>

<body>
    <main class="container">
        <div class="row">
            <div class="col-xs-10 col-xs-offset-1">

                <div class="form-group" style="margin: 30px 0px;">
                    <label for="Test">Test Field 1</label>
                    <div class="form-group-relative">
                        <select name="" class="form-control select-option">
                            <option value="77">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                            <option value="6">6</option>
                            <option value="7">7</option>
                            <option value="8">8</option>
                            <option value="9">9</option>
                            <option value="0">0</option>
                        </select>
                        <button class="btn btn-success btn-copy">KOPYALA</button>
                    </div>
                </div>

                <div class="form-group">
                    <label for="Test">Test Field 2</label>
                    <div class="form-group-relative">
                        <select disabled class="form-control select-with-option">
                            <option>Seçenekler yükleniyor...</option>
                        </select>
                        <button class="btn btn-success btn-copy">KOPYALA</button>
                    </div>
                </div>

                <h1>Form Example</h1>
                <form data-ajax="true">
                    <div class="form-group">
                        <label for="Name" class="control-label">Name</label>
                        <input type="text" name="Name" placeholder="Name" id="Name" class="form-control input-name"
                            required />
                    </div>
                    <div class="form-group">
                        <label for="Email">Email Address</label>
                        <input type="email" name="Email" placeholder="your@email.com" id="Email"
                            class="form-control input-email" required />
                    </div>
                    <div class="form-group">
                        <label for="Test">Test Field Özellik</label>
                        <div class="form-group-relative">
                            <select name="" class="form-control">
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5</option>
                                <option value="6">6</option>
                                <option value="7">7</option>
                                <option value="8">8</option>
                                <option value="9">9</option>
                                <option value="0">0</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="Test">Test Field</label>
                        <input type="text" required name="Test" id="Test" placeholder="test"
                            class="form-control input-test" />
                    </div>

                    <div class="alert hidden" aria-hidden="true"
                        data-success-message="<strong>Success!</strong> Your form was submitted."
                        data-error-message="<strong>Drats!</strong> Something afoul is afoot. Watson, hurry, I need you!">
                    </div>
                    <button type="submit" class="btn btn-success">Submit the Form</button>
                </form>
            </div>
        </div>
        <div class="row">
            <div class="col-xs-10 col-xs-offset-1">
                <h2>To Do:</h2>
                <ul>
                    <li>Handle button press and animate a loading glyphicon spinner <span
                            class="glyphicon glyphicon-refresh spin-icon"></span></li>
                    <li>Handle success and failure messaging</li>
                    <li>
                        Add field hints - Should these be on hover?
                    </li>
                    <li>Comment your code!</li>
                    <li>Verify Accessability</li>
                </ul>
            </div>
        </div>
    </main>

    <script src="https://code.jquery.com/jquery-2.2.4.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
    <script>
        // Burası bir alt menü oluşturmayı sağlar "1" seçilen valueyi belirler
        const subOptions = {
            "1": [
                {
                    value: "989898988",
                    label: "989898988"
                },
                {
                    value: "1-2",
                    label: "1-2"
                }
            ],
            "2": [
                {
                    value: "2-1",
                    label: "(2-1)"
                },
                {
                    value: "2-2",
                    label: "burası 2-2"
                }
            ]
        };

        const selectRef = $('.select-option');
        $('.btn-copy').on("click", function () {
            const val = $(this).parent().find("select,input").val();
            const _this = $(this);
            _this.text("KOPYALANDI").attr("disabled", true);
            setTimeout(() => {
                _this.text("KOPYALA").removeAttr("disabled");
            }, 2000);
            navigator.clipboard.writeText(val);
        });
        function createSubOptions() {
            $('.select-with-option + .btn-copy').removeAttr("disabled");
            $('.select-with-option').removeAttr("disabled").html(``);
            if (!selectRef || typeof selectRef.val() === "undefined") return
            if (!subOptions[selectRef.val()] || subOptions[selectRef.val()].length === 0) {
                $('.select-with-option + .btn-copy').attr("disabled", true);
                $('.select-with-option').attr("disabled", true).html(`<option>Bir seçenek bulunamadı</option>`);
                return
            }
            subOptions[selectRef.val()].forEach((item) => {
                subOptions[selectRef.val()]
                $('.select-with-option').append(`<option value="${item.value}">${item.label}</option>`)
            })
        }
        createSubOptions();

        selectRef.change(createSubOptions);


        (function ($, d) {
            $.ajaxForm = function (options) {
                var form = {
                    options: $.extend({
                        formSelector: 'form[data-ajax="true"]',
                        formRegion: 'main',
                        headerSelector: '.site-header',
                        errorMessage: "<strong>Error:</strong> We're sorry, but there has been a problem submitting your request. Please confirm all information and try again.",
                        successMessage: '<strong>Success:</strong> Your request has been successfully submitted.',
                        scrollPadding: 40
                    }, options),

                    $form: function () {
                        return $(form.options.formSelector, form.options.formRegion);
                    },

                    $invalid: function () {
                        //console.log('getting invalid', $('input:invalid', form.$form()));
                        return $('input:invalid', form.$form());
                    },

                    init: function () {

                        var $form = form.$form();
                        $('input[required]', $form).each(function (el) {
                            form.setFieldWarning(this);
                        }).on('keyup blur change', function (el) {
                            form.validateField(this);
                        });

                        form.toggleSubmitButtons();

                        $form.on('click', '[type="submit"]', function (e) {
                            e.preventDefault();

                            form.toggleSubmitButtons();
                            form.submit($(e.target).parents('form'));
                            //form.validate($(e.target).parents('form'));
                        });
                    },

                    submit: function (target) {
                        var $form = $(target), $alert = $('.alert', $form), successMessage, errorMessage;

                        successMessage = $alert.data('success-message') !== undefined ? $alert.data('success-message') : form.options.successMessage;
                        errorMessage = form.options.errorMessage;

                        $alert.addClass('alert-warning').removeClass('alert-success alert-danger hidden').attr('aria-hidden', 'false').attr('role', 'alert').html('<p><span class="glyphicon glyphicon-refresh spin-icon"></span> Submitting the form...</p>');
                        let inputTest = $('.input-test').val();

                        setTimeout(() => {
                            $alert.addClass('alert-danger').removeClass('alert-warning').html(`
                                <strong>Error:</strong><br>Test:${inputTest}
                                `);
                            form.toggleSubmitButtons(true);
                        }, 10000)

                    },



                    validateField: function (target) {
                        var $target = $(target), $invalid = form.$invalid();

                        if ($target.is(':valid')) {
                            form.setFieldValid(target);
                        } else {
                            form.setFieldInvalid(target);
                        }

                        //console.log($invalid);
                        if ($invalid.length <= 0) {
                            //console.log('toggle submit true');
                            form.toggleSubmitButtons(true);
                        } else {
                            form.toggleSubmitButtons();
                        }
                    },

                    setFieldValid: function (target) {
                        //console.log('setting field valid', target);
                        var $target = $(target),
                            $parent = $target.parents('.form-group'),
                            $status = $('span.sr-only', $parent),
                            $icon = $('span.glyphicon', $parent);
                        //$status = $('<span class="sr-only">(success)</span>').attr('id', $target.attr('id') + '-status'),
                        //$icon = $('<span class="glyphicon glyphicon-ok form-control-feedback aria-hidden="true"></span>');

                        $parent
                            .addClass('has-feedback has-success')
                            .removeClass('has-error has-warning');
                        //.append($icon)
                        //.append($status);

                        $status.html('(success)');
                        $icon
                            .addClass('glyphicon-ok')
                            .removeClass('glyphicon-remove glyphicon-warning-sign');

                        $target
                            .attr('describedBy', $target.attr('id') + '-status');
                    },

                    setFieldWarning: function (target) {
                        var $target = $(target),
                            $parent = $target.parents('.form-group'),
                            $status = $('<span class="sr-only">(warning)</span>').attr('id', $target.attr('id') + '-status'),
                            $icon = $('<span class="glyphicon glyphicon-warning-sign form-control-feedback aria-hidden="true"></span>');

                        $parent
                            .addClass('has-feedback has-warning')
                            .append($icon)
                            .append($status);

                        $target
                            .attr('describedBy', $target.attr('id') + '-status');
                    },

                    setFieldInvalid: function (target) {
                        var $target = $(target),
                            $parent = $target.parents('.form-group'),
                            $status = $('span.sr-only', $parent),
                            $icon = $('span.glyphicon', $parent);
                        //$status = $('<span class="sr-only">(error)</span>').attr('id', $target.attr('id') + '-status'),
                        //$icon = $('<span class="glyphicon glyphicon-remove form-control-feedback aria-hidden="true"></span>');

                        $parent
                            .addClass('has-feedback has-error')
                            .removeClass('has-warning has-success');
                        //.append($icon)
                        //.append($status);

                        $status.html('(error)');
                        $icon
                            .addClass('glyphicon-remove')
                            .removeClass('glyphicon-ok glyphicon-warning-sign');

                        $target
                            .attr('describedBy', $target.attr('id') + '-status');
                    },

                    toggleSubmitButtons: function (enable) {
                        if (enable === undefined) {
                            enable = false;
                        }

                        var $form = form.$form();

                        if (enable) {
                            $('[type="submit"]', form.options.formSelector).removeAttr('disabled');
                        } else {
                            $('[type="submit"]', form.options.formSelector).attr('disabled', 'disabled');
                        }
                    }
                };

                return {
                    init: form.init()
                };
            };

            $.spamCheck = function (options) {
                var spam = {
                    options: $.extend({
                        formSelector: 'form[data-spam="true"]',
                        isHumanSelector: '#antiSpam_isHuman'
                    }, options),

                    init: function () {
                        $('.js-anti-spam').hide();
                        $(d).on('click.antiSpam', spam.isHuman).on("keypress.antiSpam", spam.isHuman);
                    },

                    isHuman: function () {
                        //console.log('should set it true');
                        $(spam.options.isHumanSelector).val('true');
                        $(d).off('click.antiSpam').off('keypress.antiSpam');
                    }
                };

                return {
                    init: spam.init()
                };
            };

            $(d).ready(function () {
                var spamCheck = new $.spamCheck(),
                    ajaxForm = new $.ajaxForm();
            });
        })(jQuery, document);
    </script>
</body>

</html>
